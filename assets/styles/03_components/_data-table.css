/*=============================================
=            Data Table Component            =
=============================================*/

/*----------  1. Container & Wrapper  ----------*/
.data-table-wrapper {
  width: 100%;
  max-width: var(--table-max-width);
  margin: 0 auto;
  background-color: var(--table-surface-cell);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  position: relative;
  -webkit-overflow-scrolling: touch;
  overflow-x: auto;
}

.data-table {
  width: 100%;
  font-family: var(--font-family-sans);
  font-size: var(--table-font-size);
  border-collapse: collapse;
  table-layout: fixed;
}

/*----------  2. Scrollbar Styling  ----------*/
.data-table-wrapper {
  scrollbar-width: thin;
  scrollbar-color: var(--table-scrollbar-thumb) var(--table-scrollbar-track);
}

.data-table-wrapper::-webkit-scrollbar {
  height: 6px;
  width: 6px;
}

.data-table-wrapper::-webkit-scrollbar-track {
  background: var(--table-scrollbar-track);
  border-radius: 3px;
}

.data-table-wrapper::-webkit-scrollbar-thumb {
  background-color: var(--table-scrollbar-thumb);
  border-radius: 3px;
}

/*----------  3. Header Styles  ----------*/
.table-header {
  height: var(--table-header-height);
  padding: var(--space-2) var(--space-3);
  background-color: var(--table-surface-header);
  color: var(--table-text-header);
  font-weight: var(--font-weight-semibold);
  text-align: center;
  border-bottom: 2px solid var(--table-border);
  position: sticky;
  top: 0;
  z-index: var(--z-index-sticky);
  white-space: nowrap;
}

.table-header--sortable {
  cursor: pointer;
  user-select: none;
}

.table-header--sortable:hover {
  background-color: var(--table-state-hover);
}

.table-header__content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
}

.table-header__sort-icon {
  width: 16px;
  height: 16px;
  transition: transform var(--transition-duration-fast);
}

.table-header--sorted-desc .table-header__sort-icon {
  transform: rotate(180deg);
}

/*----------  4. Cell Styles  ----------*/
.table-cell {
  height: var(--table-cell-height);
  padding: var(--space-2);
  background-color: var(--table-surface-cell);
  color: var(--table-text-cell);
  border: 1px solid var(--table-border);
  transition: background-color var(--transition-duration-fast) var(--transition-timing-default);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*----------  5. Column Types  ----------*/
.table-cell--numeric {
  text-align: center;
  width: var(--table-number-col-width);
  min-width: var(--table-number-col-width);
  max-width: var(--table-number-col-width);
}

.table-cell--text {
  text-align: left;
  width: var(--table-insurer-col-width);
  min-width: var(--table-insurer-col-width);
  max-width: var(--table-insurer-col-width);
}

.table-cell--data {
  width: var(--table-data-col-width);
  min-width: var(--table-data-col-width);
  max-width: var(--table-data-col-width);
  text-align: center;
}

/*----------  6. Row Variants  ----------*/
.table-row--highlight {
  background-color: var(--table-surface-highlight);
}

.table-row--alternate:nth-child(even) {
  background-color: var(--table-surface-alternate);
}

.table-row--market {
  font-weight: var(--font-weight-bold);
  background-color: var(--table-surface-highlight);
}

/*----------  7. Cell States  ----------*/
.table-cell--success {
  color: var(--color-success-600);
  font-weight: var(--font-weight-bold);
}

.table-cell--danger {
  color: var(--color-danger-600);
  font-weight: var(--font-weight-bold);
}

.table-cell--highlight {
  background-color: var(--table-surface-highlight);
}

.table-cell--qtoq {
  background-color: var(--table-surface-alternate);
}

/*----------  8. Interactive States  ----------*/
.table-row:hover .table-cell {
  background-color: var(--table-state-hover);
}

.table-row--selected .table-cell {
  background-color: var(--table-state-selected);
}

.table-row--interactive {
  cursor: pointer;
}

/*----------  9. Scroll Indicators  ----------*/
.data-table-wrapper::after,
.data-table-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 20px;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-duration-base);
}

.data-table-wrapper::before {
  left: 0;
  background: linear-gradient(to right, 
    rgba(var(--color-white-rgb), 0.9), 
    rgba(var(--color-white-rgb), 0));
}

.data-table-wrapper::after {
  right: 0;
  background: linear-gradient(to left, 
    rgba(var(--color-white-rgb), 0.9), 
    rgba(var(--color-white-rgb), 0));
}

.data-table-wrapper.scroll-start::before {
  opacity: 1;
}

.data-table-wrapper.scroll-end::after {
  opacity: 1;
}

/*----------  10. Loading State  ----------*/
.data-table-wrapper--loading {
  position: relative;
  min-height: 200px;
}

.data-table-wrapper--loading::after {
  content: '';
  position: absolute;
  inset: 0;
  background-color: rgba(var(--color-white-rgb), 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
}

/*----------  11. Empty State  ----------*/
.table-empty-state {
  padding: var(--space-8);
  text-align: center;
  color: var(--color-text-muted);
}

.table-empty-state__message {
  font-size: var(--font-size-md);
  margin-bottom: var(--space-2);
}

.table-empty-state__description {
  font-size: var(--font-size-sm);
}

/*----------  12. Responsive Styles  ----------*/
@media (--viewport-sm-max) {
  .table-cell,
  .table-header {
    font-size: var(--font-size-xs);
    padding: calc(var(--space-2) * 0.75);
  }
  
  .table-cell--text {
    max-width: 150px;
  }
}

@media (--viewport-md) {
  .table-cell,
  .table-header {
    font-size: var(--font-size-sm);
  }
}

@media (--viewport-lg) {
  .table-cell,
  .table-header {
    font-size: var(--table-font-size);
  }
}

/*----------  13. Accessibility  ----------*/
/* Hide visual sort indicators from screen readers */
.table-header__sort-icon {
  aria-hidden: true;
}

/* Ensure proper focus indicators */
.table-row--interactive:focus-within {
  outline: 2px solid var(--color-state-focus);
  outline-offset: -2px;
}

/* Screen reader only text for sort status */
.table-header__sort-status {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/*----------  14. Print Styles  ----------*/
@media print {
  .data-table-wrapper {
    overflow: visible;
    box-shadow: none;
  }

  .table-header,
  .table-cell {
    background-color: transparent !important;
    color: black !important;
  }

  .table-header {
    border-bottom: 2px solid black;
  }

  .table-cell {
    border: 1px solid black;
  }

  .data-table-wrapper::before,
  .data-table-wrapper::after {
    display: none;
  }
}

/*----------  15. Utility Classes  ----------*/
.table-cell-nowrap {
  white-space: nowrap;
}

.table-cell-truncate {
  max-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.table-row-expandable {
  cursor: pointer;
}

.table-row-expandable[aria-expanded="true"] {
  background-color: var(--table-surface-highlight);
}

/* Hide table controls in dash-table */
.dash-table .dash-table-menu__toggle,
.dash-table .dash-spreadsheet-menu,
.dash-table .column-header--toggle,
.dash-table .dash-filter--case,
.dash-table .dash-filter,
.dash-table-container .dash-table-menu,
.dash-table-container .dash-spreadsheet-container .dash-spreadsheet-inner .dash-fixed-content .dash-fixed-row .dash-fixed-row-info .dash-table-menu__toggle,
.dash-spreadsheet-inner th .column-header--toggle,
th .column-header--toggle {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    visibility: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
}

/* Hide specific toggle states */
.dash-table-menu__toggle--open,
.dash-table-menu__toggle--closed {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    visibility: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
}

/* Hide all descendants within dash-spreadsheet-menu */
.dash-spreadsheet-menu *,
.dash-spreadsheet-menu *::before,
.dash-spreadsheet-menu *::after {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    visibility: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
}

/* Hide menu items */
.dash-table-menu,
.dash-menu-item,
.dash-menu-item--show-hide-toggle-columns,
.dash-menu-item--hide-columns,
.show-hide-toggle-columns,
.dash-table-menu__dropdown,
.dash-table-menu__dropdown--content,
[class*="dash-menu-item"] {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    visibility: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
}

/* Hide sort icons */
.dash-header-cell::after,
.dash-header-cell--sort-asc::after,
.dash-header-cell--sort-desc::after {
    display: none !important;
    content: none !important;
}

/* Hide additional control elements such as pagination, column resizing, and filters */
.dash-table .dash-pagination,
.dash-table .dash-column-resize-handle,
.dash-table .dash-filter-dropdown,
.dash-table .dash-filter-input {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: absolute !important;
    visibility: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
}

/* Ensure all hidden elements are not accessible via keyboard or screen readers */
.dash-table .dash-table-menu__toggle,
.dash-table .dash-spreadsheet-menu,
.dash-table .column-header--toggle,
.dash-table .dash-filter--case,
.dash-table .dash-filter,
.dash-table-container .dash-table-menu,
.dash-table-menu,
.dash-menu-item,
.dash-menu-item--show-hide-toggle-columns,
.dash-menu-item--hide-columns,
.show-hide-toggle-columns,
.dash-table-menu__dropdown,
.dash-table-menu__dropdown--content,
[class*="dash-menu-item"],
.dash-table .dash-pagination,
.dash-table .dash-column-resize-handle,
.dash-table .dash-filter-dropdown,
.dash-table .dash-filter-input {
    aria-hidden: true;
    tabindex: -1;
}

